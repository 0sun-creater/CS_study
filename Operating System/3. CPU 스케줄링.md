# CPU 스케쥴링 개요
운영체제가 프로세스들에게 공정하고 합리적으로 CPU 자원을 배분하는 것   
컴퓨터 성능과 직결되는 문제   

## 프로세스 우선순위
대부분의 프로세스는 CPU와 입출력장치를 모두 사용하며 실행 -> 실행 상태와 대기 상태를 반복   
입출력 작업이 많은 프로세스 / 실시간 프로세스 / 일부 백그라운드 프로세스 등이 우선순위 높음   
PCB에 명시   

1. 입출력 집중 프로세스(I/O bound process) - 대기 상태
비디오 재생이나 디스크 백업 작업을 담당하는 프로세스와 같이 입출력 작업이 많은 프로세스
   
2. CPU 집중 프로세스 (CPU bound process) - 실행 상태
복잡한 수학 연산, 컴파일, 그래픽 처리 작업을 담당하는 프로세스와 같이 CPU 작업이 많은 프로세스


* CPU burst : CPU를 이용하는 작업
* I/O burst : 입출력 장치를 기다리는 작업

CPU 집중 프로세스와 입출력 집중 프로세스가 모두 동일한 빈도로 CPU를 사용하는 것은 비합리적
-> 입출력 집중 프로세스를 가능한 한 빨리 실행시켜 입출력장치를 끊임없이 작동시키고, 그 다음 CPU 집중 프로세스에 집중적으로 CPU를 할당하는 것이 더 효율적 

## 스케줄링 큐
운영체제가 모든 프로세스의 PCB를 뒤적거리는 것은 비효율적
'줄을 서서 기다릴 것'을 요구
1. 준비 큐 (ready queue) :CPU 이용 원하는 프로세스
2. 대기 큐 (waiting queue) : 입출력장치 이용 원하는 프로세스

p.323 그림


## 선점형과 비선점형 스케줄링
### 선점형 스케줄링
- CPU를 비롯한 자원을 사용하고 있더라도 운영체제가 프로세스로부터 자원을 강제로 빼앗아 다른 프로세스에 할당할 수 있는 스케줄링 방식
- 어느 하나의 프로세스가 자원 사용을 독점할 수 없음
- 프로세스마다 정해진 시간만큼 CPU를 사용하고, 정해진 시간을 모두 소비하여 타이머 인터럽트가 발생하면 운영체제가 해당 프로세스로부터 CPU 자원을 빼앗아 다음 프로세스에 할당하는 방식\
- 문맥 교환 과정에서 오버헤드 발생 가능성 존재

### 비선점형 스케줄링
- 하나의 프로세스가 자원을 사용하고 있다면 그 프로세스가 종료되거나 스스로 대기 상태에 접어들기 전까진 다른 프로세스가 끼어들 수 없는 스케줄링 방식
- 하나의 프로세스가 자원 사용 독점
- 모든 프로세스가 골고루 자원을 사용할 수 없다는 단점


# CPU 스케줄링 알고리즘
### 1. 선입 선출 스케줄링 (First Come First Served)
  - 준비 큐에 삽입된 순서대로 비선점형 스케쥴링 방식  
  - 때떄로 프로세스들이 기다리는 시간이 매우 길어질 수 있음
  - 호위 효과(convoy effect) : CPU 사용 시간이 긴 프로세스가 먼저 도착하면 무작정 기다리는 수밖에 없음
    
### 2. 최단 작업 우선 스케줄링 (Shortest Job First)
  - 호위 효과 방지
  - 준비 큐에 삽입된 프로세스들 중 CPU 이용 시간의 길이가 가장 짧은 프로세스부터 실행하는 스케줄링 방식
  - 선점형 최단 작업 우선 스케줄링 : 최소 잔여 시간 우선 스케줄링

### 3. 라운드 로빈 스케줄링
  - 선입 선처리 스케줄링 + 타임 슬라이스
  - 타임 슬라이스 : 각 프로세스가 CPU를 사용할 수 있는 정해진 시간
  - 정해진 타임 슬라이스만큼으 시간 동안 돌아가며 CPU를 사용하는 선점형 스케줄링

### 4. 최소 잔여 시간 우선 스케줄링 (Shortest Remaining Time)
  - 최단 작업 우선 스케줄링 + 라운드 로빈 알고리즘
  - 최소 잔여 시간 우선 스케줄링 하에서 프로세스들은 정해진 타임 슬라이스만큼 CPU를 사용하되, CPU를 사용할 다음 프로세스로는 남아있는 작업 시간이 가장 적은 프로세스가 선택됨

### 5. 우선순위 스케줄링
  - 프로세스들에 우선순위를 부여하고 가장 높은 우선순위를 가진 프로세스부터 실행하는 알고리즘
  - 기아 현상 : 우선순위가 낮은 프로세스는 계속해서 연기될 수 있음
  - 에이징 기법 : 기아 현상 방지 / 오랫동안 대기한 프로세스의 우선순위를 점차 높이는 방식

### 6. 다단계 큐 스케줄링
  - 우선순위별로 준비 큐를 여러 개 사용하는 스케줄링 방식
  - 우선순위가 가장 높은 큐에 있는 프로세스들을 먼저 처리하고, 그 큐가 비어 있으면 그다음 우선순위 큐에 있는 프로세스들을 처리한다.
  - 프로세스 유형별로 우선순위를 구분하여 실행하는 것이 편리해짐
  - 큐 별로 타임 슬라이스를 여러개 지정 가능, 큐마다 다른 스케줄링 알고리즘 사용 가능
  - 프로세스들이 큐 사이를 이동할 수 없음 => 기아현상

### 7. 다단계 피드백 큐 스케줄링
  - 프로세스들이 큐 사이를 이동할 수 있음 + 다단계 큐
  - CPU를 오래 사용해야 하는 프로세스는 점차 우선순위가 낮아짐
  - 우선순위 큐에서 너무 오래 기다리고 있는 프로세스가 있다면 점차 우선순위 높은 큐로 이동시키는 에이징 기법 적용
  - 가장 일반적인 CPU 스케줄링 알고리즘
